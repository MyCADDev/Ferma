
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="An ORM / OGM for the TinkerPop graph stack.">
      
      
        <link rel="canonical" href="http://syncleus.com/Ferma/comparing_the_alternatives/">
      
      
        <meta name="author" content="Syncleus">
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.10.1">
    
    
      
        <title>Comparing the Alternatives - Ferma</title>
      
    
    
      <script src="../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-a20f419c8e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-23f75ab9c7.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://syncleus.com/Ferma" title="Ferma" class="md-header-nav__button md-logo">
          
            
              <img src="../images/ferma-logo.svg" width="24" height="24">
            
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Comparing the Alternatives
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/Syncleus/Ferma" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Syncleus/Ferma
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        
          <img src="../images/ferma-logo.svg">
        
      
    </div>
    Ferma
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/Syncleus/Ferma" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Syncleus/Ferma
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Comparing the Alternatives
      </label>
    
    <a href="./" title="Comparing the Alternatives" class="md-nav__link md-nav__link--active">
      Comparing the Alternatives
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#benchmarks" title="Benchmarks" class="md-nav__link">
    Benchmarks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-breakdown" title="Feature Breakdown" class="md-nav__link">
    Feature Breakdown
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#type-information-encoded-into-graph" title="Type information encoded into graph" class="md-nav__link">
    Type information encoded into graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framing-instantiated-by-type-hierarchy" title="Framing instantiated by type hierarchy" class="md-nav__link">
    Framing instantiated by type hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-queried-by-type-hierarchy" title="Element queried by type hierarchy" class="md-nav__link">
    Element queried by type hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turning-off-type-resolution-per-call" title="Turning off type resolution per call" class="md-nav__link">
    Turning off type resolution per call
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-type-encoded-in-the-graph" title="Changing type encoded in the graph" class="md-nav__link">
    Changing type encoded in the graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-how-types-are-encoded" title="Customizing how types are encoded" class="md-nav__link">
    Customizing how types are encoded
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Core Annotations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Core Annotations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../annotations/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../annotations/adjacency/" title="@Adjacency" class="md-nav__link">
      @Adjacency
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../annotations/incidence/" title="@Incidence" class="md-nav__link">
      @Incidence
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../annotations/property/" title="@Property" class="md-nav__link">
      @Property
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#benchmarks" title="Benchmarks" class="md-nav__link">
    Benchmarks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-breakdown" title="Feature Breakdown" class="md-nav__link">
    Feature Breakdown
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#type-information-encoded-into-graph" title="Type information encoded into graph" class="md-nav__link">
    Type information encoded into graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framing-instantiated-by-type-hierarchy" title="Framing instantiated by type hierarchy" class="md-nav__link">
    Framing instantiated by type hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#element-queried-by-type-hierarchy" title="Element queried by type hierarchy" class="md-nav__link">
    Element queried by type hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turning-off-type-resolution-per-call" title="Turning off type resolution per call" class="md-nav__link">
    Turning off type resolution per call
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-type-encoded-in-the-graph" title="Changing type encoded in the graph" class="md-nav__link">
    Changing type encoded in the graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-how-types-are-encoded" title="Customizing how types are encoded" class="md-nav__link">
    Customizing how types are encoded
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Syncleus/Ferma/edit/master/docs/comparing_the_alternatives.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Comparing the Alternatives</h1>
                
                <p>There are several OGM/ORM options out there. For the purposes of this document we will focus only on those that have a
stable release, or are close to a stable release. At the time of this writing those are: Tinkerpop Framed and Totorom.</p>
<h2 id="benchmarks">Benchmarks<a class="headerlink" href="#benchmarks" title="Permanent link">&para;</a></h2>
<p>We maintain an informal project for benchmarking Ferma against other OGM available, you can find the
<a href="https://github.com/Syncleus/Ferma-benchmark">source here</a>. However below is a matrix breakdown of the results. Instead
of showing raw execution time we show the ratio of each OGM compared to Ferma. Therefore if the table lists 1x then it
means the framework has the same execution time as Ferma, if it lists 2x then it took twice as long to execute, and if
it indicates 0.5x then it took half the time to execute. Obviously any value less than 1x indicates the OGM out
performed Ferma and any value greater than 1x indicates Ferma had the superior performance tiimes.</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>Blueprints</strong></th>
<th><strong>Gremlin Pipeline</strong></th>
<th><strong>Tinkerpop3</strong></th>
<th><strong>Frames</strong></th>
<th><strong>Totorom</strong></th>
<th><strong>Peapod</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Get adjacencies via annotation</strong></td>
<td>Not capable</td>
<td>Not capable</td>
<td>Not capable</td>
<td>x2.09</td>
<td>Not capable</td>
<td>x2.65</td>
</tr>
<tr>
<td><strong>Get verticies (untyped)</strong></td>
<td>x0.89</td>
<td>x3.94</td>
<td>x16.98</td>
<td>Not capable</td>
<td>x4.24</td>
<td>Not capable</td>
</tr>
<tr>
<td><strong>Get verticies (typed)</strong></td>
<td>x0.92</td>
<td>x3.94</td>
<td>Not capable</td>
<td>x0.96</td>
<td>x4.20</td>
<td>x20.74</td>
</tr>
<tr>
<td><strong>Get verticies and call next (untyped)</strong></td>
<td>x0.79</td>
<td>x3.87</td>
<td>x11.74</td>
<td>Not capable</td>
<td>x4.81</td>
<td>Not capable</td>
</tr>
<tr>
<td><strong>Get verticies and call next (typed)</strong></td>
<td>x0.72</td>
<td>x2.91</td>
<td>Not capable</td>
<td>x1.94</td>
<td>x3.31</td>
<td>x16.70</td>
</tr>
</tbody>
</table>
<p>As can be seen Ferma out performs all the alternative solutions considerably by several orders of magnitude. While
results do vary slightly from system to system these results are pretty close to typical. Go ahead, check out the
benchmark program and run it for yourself!</p>
<h2 id="feature-breakdown">Feature Breakdown<a class="headerlink" href="#feature-breakdown" title="Permanent link">&para;</a></h2>
<p>Despite the superior performance of Ferma it also supports all the features provided by the alternatives out there, not
to mention several novel features. The following gives a quick breakdown of the features of the various frameworks. We
also include a bit later in the document some Ferma examples showing the various features in action. All of the examples
below use the domain model <a href="Ferma:Domain_Example">found here</a>.</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>Ferma</strong></th>
<th><strong>Frames</strong></th>
<th><strong>Totorom</strong></th>
<th><strong>Peapod</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="../creating_annotated_domain_models">JPA-like Annotations</a></strong></td>
<td>Supported</td>
<td>Supported</td>
<td>Not Supported</td>
<td>Supported</td>
</tr>
<tr>
<td><strong><a href="#type-information-encoded-into-graph">Type information encoded into graph</a></strong></td>
<td>Supported</td>
<td>Supported</td>
<td>Supported</td>
<td>Supported</td>
</tr>
<tr>
<td><strong><a href="#framing-instantiated-by-type-hierarchy">Framing of elements instantiated according to type hierarchy</a></strong></td>
<td>Supported</td>
<td>Supported</td>
<td>Supported</td>
<td>Supported</td>
</tr>
<tr>
<td><strong><a href="#element-queried-by-type-hierarchy">Element queried by type hierarchy</a></strong></td>
<td>Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
<td>Partial *</td>
</tr>
<tr>
<td><strong><a href="#turning-off-type-resolution-per-call">Turning off type resolution on a per call basis</a></strong></td>
<td>Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
</tr>
<tr>
<td><strong><a href="#changing-type-encoded-in-the-graph">Changing the encoded graph type already stored in the database</a></strong></td>
<td>Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
</tr>
<tr>
<td><strong><a href="#customizing-how-types-are-encoded">Customizing the way type information is stored in the graph</a></strong></td>
<td>Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
</tr>
<tr>
<td><strong>Tinkerpop 2 support</strong></td>
<td>Supported</td>
<td>Supported</td>
<td>Supported</td>
<td>Not Supported</td>
</tr>
<tr>
<td><strong>Tinkerpop 3 support</strong></td>
<td>Not Supported</td>
<td>Not Supported</td>
<td>Not Supported</td>
<td>Supported</td>
</tr>
</tbody>
</table>
<p>* While Peapod does support querying for all instances of a type, and its subtypes, it does not support a mechanism to
query for a specific type while excluding subtypes.</p>
<h3 id="type-information-encoded-into-graph">Type information encoded into graph<a class="headerlink" href="#type-information-encoded-into-graph" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">types</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Class</span><span class="o">&lt;?&gt;[]{</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">}));</span>
<span class="n">Graph</span> <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="o">();</span>
<span class="n">FramedGraph</span> <span class="n">fg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingFramedGraph</span><span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">types</span><span class="o">);</span>

<span class="n">fg</span><span class="o">.</span><span class="na">addFramedVertex</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">next</span><span class="o">(</span><span class="n">Program</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="n">String</span> <span class="n">personClassName</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
<span class="n">String</span> <span class="n">encodedClassName</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">PolymorphicTypeResolver</span><span class="o">.</span><span class="na">TYPE_RESOLUTION_KEY</span><span class="o">)</span>
<span class="k">assert</span><span class="o">(</span><span class="n">personClassName</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">encodedClassName</span><span class="o">));</span>
</pre></div>

<h3 id="framing-instantiated-by-type-hierarchy">Framing instantiated by type hierarchy<a class="headerlink" href="#framing-instantiated-by-type-hierarchy" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">types</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Class</span><span class="o">&lt;?&gt;[]{</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                                                                         <span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">}));</span>
<span class="n">TinkerGraph</span> <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="o">();</span>
<span class="n">FramedGraph</span> <span class="n">fg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingFramedGraph</span><span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">types</span><span class="o">);</span>

<span class="n">fg</span><span class="o">.</span><span class="na">addFramedVertex</span><span class="o">(</span><span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">//make sure the newly added node is actually a programmer</span>
<span class="n">Person</span> <span class="n">programmer</span> <span class="o">=</span> <span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">next</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="k">assert</span><span class="o">(</span><span class="n">programmer</span> <span class="k">instanceof</span> <span class="n">Programmer</span><span class="o">);</span>
</pre></div>

<h3 id="element-queried-by-type-hierarchy">Element queried by type hierarchy<a class="headerlink" href="#element-queried-by-type-hierarchy" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">types</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Class</span><span class="o">&lt;?&gt;[]{</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                                                                         <span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">}));</span>
<span class="n">TinkerGraph</span> <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="o">();</span>
<span class="n">FramedGraph</span> <span class="n">fg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingFramedGraph</span><span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">types</span><span class="o">);</span>

<span class="n">fg</span><span class="o">.</span><span class="na">addFramedVertex</span><span class="o">(</span><span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">fg</span><span class="o">.</span><span class="na">addFramedVertex</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">//counts how many people (or subclasses thereof) in the graph.</span>
<span class="k">assert</span><span class="o">(</span><span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">count</span><span class="o">()</span> <span class="o">==</span> <span class="mi">2</span><span class="o">);</span>
<span class="c1">//counts how many programmers are in the graph</span>
<span class="k">assert</span><span class="o">(</span><span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">has</span><span class="o">(</span><span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">count</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">);</span>
</pre></div>

<h3 id="turning-off-type-resolution-per-call">Turning off type resolution per call<a class="headerlink" href="#turning-off-type-resolution-per-call" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">types</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Class</span><span class="o">&lt;?&gt;[]{</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                                                                         <span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">}));</span>
<span class="n">TinkerGraph</span> <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="o">();</span>
<span class="n">FramedGraph</span> <span class="n">fg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingFramedGraph</span><span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">types</span><span class="o">);</span>

<span class="n">fg</span><span class="o">.</span><span class="na">addFramedVertex</span><span class="o">(</span><span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">//With type resolution is active it should be a programmer</span>
<span class="k">assert</span><span class="o">(</span><span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">next</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="k">instanceof</span> <span class="n">Programmer</span><span class="o">);</span>
<span class="c1">//With type resolution bypassed it is no longer a programmer</span>
<span class="k">assert</span><span class="o">(!(</span><span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">nextExplicit</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="k">instanceof</span> <span class="n">Programmer</span><span class="o">));</span>
</pre></div>

<h3 id="changing-type-encoded-in-the-graph">Changing type encoded in the graph<a class="headerlink" href="#changing-type-encoded-in-the-graph" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">types</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Class</span><span class="o">&lt;?&gt;[]{</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                                                                         <span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">}));</span>
<span class="n">TinkerGraph</span> <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="o">();</span>
<span class="n">FramedGraph</span> <span class="n">fg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingFramedGraph</span><span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">types</span><span class="o">);</span>

<span class="n">fg</span><span class="o">.</span><span class="na">addFramedVertex</span><span class="o">(</span><span class="n">Programmer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">//make sure the newly added node is actually a programmer</span>
<span class="n">Person</span> <span class="n">programmer</span> <span class="o">=</span> <span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">next</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="k">assert</span><span class="o">(</span><span class="n">programmer</span> <span class="k">instanceof</span> <span class="n">Programmer</span><span class="o">);</span>

<span class="c1">//change the type resolution to person</span>
<span class="n">programmer</span><span class="o">.</span><span class="na">setTypeResolution</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">//make sure the newly added node is actually a programmer</span>
<span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">next</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="k">assert</span><span class="o">(</span><span class="n">person</span> <span class="k">instanceof</span> <span class="n">Person</span><span class="o">);</span>
<span class="k">assert</span><span class="o">(!(</span><span class="n">person</span> <span class="k">instanceof</span> <span class="n">Programmer</span><span class="o">));</span>
</pre></div>

<h3 id="customizing-how-types-are-encoded">Customizing how types are encoded<a class="headerlink" href="#customizing-how-types-are-encoded" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">types</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Class</span><span class="o">&lt;?&gt;[]{</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">}));</span>
<span class="kd">final</span> <span class="n">ReflectionCache</span> <span class="n">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReflectionCache</span><span class="o">(</span><span class="n">types</span><span class="o">);</span>
<span class="n">FrameFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationFrameFactory</span><span class="o">(</span><span class="n">cache</span><span class="o">);</span>
<span class="n">TypeResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PolymorphicTypeResolver</span><span class="o">(</span><span class="n">cache</span><span class="o">,</span> <span class="s">&quot;customTypeKey&quot;</span><span class="o">);</span>
<span class="n">Graph</span> <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="o">();</span>
<span class="n">FramedGraph</span> <span class="n">fg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingFramedGraph</span><span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">factory</span><span class="o">,</span> <span class="n">resolver</span><span class="o">);</span>

<span class="n">fg</span><span class="o">.</span><span class="na">addFramedVertex</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="n">fg</span><span class="o">.</span><span class="na">v</span><span class="o">().</span><span class="na">next</span><span class="o">(</span><span class="n">Program</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="n">String</span> <span class="n">personClassName</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
<span class="n">String</span> <span class="n">encodedClassName</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;customTypeKey&quot;</span><span class="o">)</span>
<span class="k">assert</span><span class="o">(</span><span class="n">personClassName</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">encodedClassName</span><span class="o">));</span>
</pre></div>
                
                  
                
              
              
                
                  <h2 id="__comments">Comments</h2>
                  <div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    this.page.url = "http://syncleus.com/Ferma/comparing_the_alternatives/";
    this.page.identifier =
      "/comparing_the_alternatives/";
  };
  (function() {
    var d = document, s = d.createElement("script");
    s.src = "//syncleus.disqus.com/embed.js";
    s.setAttribute("data-timestamp", +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../getting_started/" title="Getting Started" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Getting Started
              </span>
            </div>
          </a>
        
        
          <a href="../annotations/overview/" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2004 - 2017 Syncleus, Inc.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/Syncleus" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-f3ab9e5ff8.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>